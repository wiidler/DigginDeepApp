@page "/todo/{id}"

@inject Services.IToDoListService Service
@inject NavigationManager navManager
<h3>Task Details</h3>

@if(todo == null)
{
    <p>Loading...</p>
}
else
{
<div class="row justify content center m.3">
    <div class="col-sm-8">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">@todo.Task</h5>
                <p class="card-text">@todo.Description</p>
                <p class="card-text">Due Date: @todo.DueDate</p>
                <p class="card-text">Complete: @todo.IsComplete</p>
            </div>
            <div class="card-footer">
                <button class="btn btn-primary">Mark As Completed</button>
                <button class="btn btn-secondary">Edit</button>
                <button class="btn btn-danger" @onclick="DeleteTask">Delete</button>
            </div>
        </div>
    </div>
</div>
}


@code {
    [Parameter]
    public string Id { get; set; }

    public DigginDeep.Models.ToDoList todo { get; set; } = new DigginDeep.Models.ToDoList();

    protected override async Task OnInitializedAsync()
    {
        todo = await Service.GetToDoList(int.Parse(Id));
    }

    protected async void DeleteTask()
    {
        await Service.DeleteToDoList(int.Parse(Id));
        navManager.NavigateTo("/todo");
    }
}
